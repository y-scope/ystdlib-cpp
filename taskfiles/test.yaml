version: "3"

tasks:
  default:
    desc: "Runs ystdlib-cpp unit test targets."
    summary: |-
      Runs a specific ystdlib-cpp unit test target, or run the global unit test target if no
      library is specified.

      Usage: task test -- <lib_name>
    vars:
      TARGET_NAME: "{{ .CLI_ARGS | default `all` }}"
    deps:
      - task: ":build:unit-test"
        vars:
          CLI_ARGS: "{{.TARGET_NAME}}"
    cmds:
      - "{{.G_BUILD_DIR}}/testbin/unit-test-{{.TARGET_NAME}}"
