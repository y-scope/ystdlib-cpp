version: "3"

tasks:
  all:
    desc: "Runs all unit tests."
    cmds:
      - task: "run-all"

  run-*:
    desc: "Runs unit test for the specified library."
    vars:
      TEST_TARGET: >-
        {{printf "unit-test-%s" (index .MATCH 0)}}
    deps:
      - task: ":build:{{.TEST_TARGET}}"
    cmd: "{{.G_TEST_BIN_DIR}}/{{.TEST_TARGET}}"
